// +build js

package all_pages

import (
	"testing"
)

func TestGetCouchCookie(t *testing.T) {
	cookie := "_gothic_session=MTQ0MTkxMDQ0OHxEcTNhdHFGUlFWcHRRRVc2N2NNVkVUeWFRdm93eksxR0NxSUFBa2FlZEVkTGN4blhrZ3FicGxOTEc2b0lBWndOdlI0dUZDR2JDTFNfb2U4YnkwMExfa3BvZDNpVHZCVlpCYmliZEpVem84RGlIZ0U5OWZVeGF3VUxpTnVfZ3ZyWm9nVWoxTXl6cjRaU2FwdGZxMmpWODBmb1puR2htZXh2V3ZhYmp4NVlsRUwyOW9RVDhkXzV1d0RVQVlOWWpVWWZxMlBvV2dFRndubldmdDFpbmlkUlpOVzNRU3JtcU5lVC0wTlF0ZXlORnpKUXNFOXQyWDBUWEVyN1RtUFQ5NzFac3ZPVEkzRk1YSHJ0UmNaQXl3cXF2MEQ3Q1Y4Si1WU3BuRmxJbzAzaUE0VHlBMGFyWTBHNUhHS2dnY1FUdmhPZ1M1OEIzV3pYVWxWS3lZMUpJRXRHcm94dy1qVUVjWjJIUGd2Xzlnc2ZCVkE0MWJrckd2YllQeGVXM3FpeVNkc2JhMWhMenc0ZGR4UW5KSmM9fMTTK2zrnE5dd2xAKiwEkGB3JxlCt_CsWMxbBPQFmdnD; _flashback=MTQ0MTkxMDQ0OHxMSzBvQW10TUpTY2lwdWVuRmtYQTJJc0xRZjNXM1dma2s5MTJkWmtYWG42cHpzTVlPVlIwVEJOekdNV2tSeG13Vk5Bd3dLR0hTQlNNMDNNTFRSNVNZVUw0eU1PcFM5OFdmcmJkZ2ZYa09IVWZlZ2dha0NUcVJyaEFOOXhHZWpJVXzHmdHkfYbAOLnRNZPyNb2SbFAgU52UvXbVjuHNEsBy7Q==; AuthSession=ZGQ3ZDFhYjEtM2UzOC00ODEwLWEyN2MtZmI0NmJlMzk4MDQ3OjU1RjFDRUIyOj3HyM7gNxXsGNNae12NVeFM5Nuv"
	value := GetCouchCookie(cookie)
	if value != "ZGQ3ZDFhYjEtM2UzOC00ODEwLWEyN2MtZmI0NmJlMzk4MDQ3OjU1RjFDRUIyOj3HyM7gNxXsGNNae12NVeFM5Nuv" {
		t.Fatalf("Unexpected value from GetCouchCookie '%s'", value)
	}
}

func TestExtractUserID(t *testing.T) {
	value := "ZGQ3ZDFhYjEtM2UzOC00ODEwLWEyN2MtZmI0NmJlMzk4MDQ3OjU1RjFDRUIyOj3HyM7gNxXsGNNae12NVeFM5Nuv"
	userid := ExtractUserID(value)
	if userid != "dd7d1ab1-3e38-4810-a27c-fb46be398047" {
		t.Fatalf("Unexpected value from ExtractUserID: %s", userid)
	}
}
